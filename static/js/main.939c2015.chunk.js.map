{"version":3,"sources":["base/Cache.js","base/WWW.js","core/Data.js","nonstate/atoms/Link.js","nonstate/molecules/CharityView.js","nonstate/molecules/CharityListView.js","stateful/pages/HomePage.js","App.js","reportWebVitals.js","index.js"],"names":["Cache","cacheKey","asyncFallback","hotItem","localStorage","getItem","JSON","parse","coldItem","setItem","stringify","QuotaExceededError","clear","JSON_HEADERS","headers","Accept","TSV_HEADERS","jsonNonCache","url","a","fetch","response","json","dataJson","WWW","pathFragmentList","join","get","text","content","lines","split","keys","map","key","replace","dataList","slice","line","values","reduce","data","i","filter","Data","tsv","Link","props","href","label","linkType","className","target","rel","CharityView","charity","name","can_donate_offline","can_donate_online","renderDonateOffline","renderDonateOnline","CharityListView","charityList","iCharity","URL_SOURCE","HomePage","state","getCharityList","this","setState","Component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.939c2015.chunk.js","sourcesContent":["export default class Cache {\n  static async get(cacheKey, asyncFallback) {\n    const hotItem = localStorage.getItem(cacheKey);\n    if (hotItem) {\n      return JSON.parse(hotItem);\n    }\n\n    const coldItem = await asyncFallback();\n    try {\n      localStorage.setItem(cacheKey, JSON.stringify(coldItem));\n    } catch (QuotaExceededError) {\n      localStorage.clear();\n    }\n    return coldItem;\n  }\n}\n","import Cache from \"./Cache.js\";\n\nconst CACHE_VERSION = \"v20210915\";\n\nconst JSON_HEADERS = {\n  headers: {\n    Accept: \"application/json\",\n  },\n};\n\nconst TSV_HEADERS = {\n  headers: {\n    Accept: \"text/csv\",\n  },\n};\n\nasync function jsonNonCache(url) {\n  const response = await fetch(url, JSON_HEADERS);\n  const dataJson = await response.json();\n  return dataJson;\n}\n\nexport default class WWW {\n  static pathJoin(pathFragmentList) {\n    return pathFragmentList.join(\"/\");\n  }\n\n  static async json(url) {\n    return Cache.get(`WWW.json.${CACHE_VERSION}.${url}`, async function () {\n      return jsonNonCache(url);\n    });\n  }\n\n  static async tsv(url) {\n    const response = await fetch(url, TSV_HEADERS);\n    const content = await response.text();\n    const lines = content.split(\"\\n\");\n    const keys = lines[0].split(\"\\t\").map((key) => key.replace(\"\\r\", \"\"));\n    const dataList = lines\n      .slice(1, -1)\n      .map(function (line) {\n        let values = line.split(\"\\t\");\n        return keys.reduce(function (data, key, i) {\n          data[key] = values[i].replace(\"\\r\", \"\");\n          return data;\n        }, {});\n      })\n      .filter((data) => data);\n    return dataList;\n  }\n}\n","import WWW from \"../base/WWW.js\";\n\nexport default class Data {\n  static async getCharityList() {\n    return await WWW.tsv(\"/dhaana/data/sl.charities.tsv\");\n  }\n}\n","import \"./Link.css\";\nexport default function Link(props) {\n  const { href, label, linkType } = props;\n  return (\n    <a\n      className={`a-link a-link-${linkType}`}\n      href={href}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      {label}\n    </a>\n  );\n}\n","import Link from \"../atoms/Link.js\";\nimport \"./CharityView.css\";\n\nexport default function CharityView(props) {\n  const { charity } = props;\n  const { name, url, can_donate_offline, can_donate_online } = charity;\n\n  const renderDonateOffline =\n    can_donate_offline !== \"NO\" ? (\n      <Link\n        href={can_donate_offline}\n        label=\"Donate Offline\"\n        linkType=\"highlight\"\n      />\n    ) : null;\n  const renderDonateOnline =\n    can_donate_online !== \"NO\" ? (\n      <Link\n        href={can_donate_online}\n        label=\"Donate Online\"\n        linkType=\"highlight\"\n      />\n    ) : null;\n\n  return (\n    <div className=\"div-charity-view\">\n      <div className=\"div-charity-name\">\n        {name}\n      </div>\n      {renderDonateOnline}\n      {renderDonateOffline}\n      <Link href={url} label=\"Website\" />\n    </div>\n  );\n}\n","import CharityView from \"./CharityView.js\";\n\nimport \"./CharityListView.css\";\n\nexport default function CharityListView(props) {\n  const { charityList } = props;\n\n  return (\n    <div className=\"div-charity-list-view\">\n      {charityList.map(function (charity, iCharity) {\n        const key = `charity-${iCharity}`;\n        return <CharityView key={key} charity={charity} iCharity={iCharity} />;\n      })}\n    </div>\n  );\n}\n","import { Component } from \"react\";\n\nimport Data from \"../../core/Data.js\";\n\nimport CharityListView from \"../../nonstate/molecules/CharityListView.js\";\n\nimport \"./HomePage.css\";\n\nconst URL_SOURCE =\n  \"http://www.ird.gov.lk\" +\n  \"/en/publications/SitePages/Approved%20Charity.aspx\" +\n  \"?menuid=1408\";\n\nexport default class HomePage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { charityList: null };\n  }\n\n  async componentDidMount() {\n    const charityList = await Data.getCharityList();\n    this.setState({ charityList });\n  }\n\n  render() {\n    const { charityList } = this.state;\n    if (!charityList) {\n      return \"Loading...\";\n    }\n    return (\n      <div className=\"div-home-page\">\n        <div className=\"div-header\">\n          <div className=\"div-title\">Charities in Sri Lanka</div>\n          <div className=\"div-source\">\n            {\"Source: \"}\n            <a\n              className=\"a-source\"\n              href={URL_SOURCE}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              ird.gov.lk\n            </a>\n          </div>\n        </div>\n        <div className=\"div-body\">\n          <div className=\"div-preamble\">\n            <p>\n              I’ve been searching the web and elsewhere for a list of Sri Lankan\n              charities. The best I could found was this list of 81 approved\n              charities on the{\" \"}\n              <a href={URL_SOURCE} target=\"_blank\" rel=\"noreferrer\">\n                Inland Revenue Department\n              </a>{\" \"}\n              Website. It was last updated in December 2019 — so there might be\n              some charities not on the list.\n            </p>\n          </div>\n          <CharityListView charityList={charityList} />\n        </div>\n      </div>\n    );\n  }\n}\n","import \"./App.css\";\n\nimport HomePage from \"./stateful/pages/HomePage.js\";\n\nfunction App() {\n  return <HomePage />;\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}